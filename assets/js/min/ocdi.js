"use strict";!function(o){var c,l;"undefined"!=typeof ocdi&&(c={current:"",plugins:{install:[],activate:[]},demo:""},(l=o("#js-ocdi-modal-content")).length||(l=!(l=o(".ocdi__demo-import-notice")).length?o(".ocdi-install-plugins-content"):l).find(".iqconnetik-ocdi-required-plugins").length&&l.next().find(".button-primary").attr("disabled","disabled"),l.on("click",".iqconnetik-ocdi-install-plugins-button",function(i){var e=o(this);e.attr("disabled","disabled"),c.current="",c.plugins.install=e.data("install").split(","),c.plugins.activate=e.data("activate").split(","),c.demo=e.data("demo"),c.plugins.install.map(function(n,i,t){l.find("span.iqconnetik-ocdi-"+n).text(iqconnetik_ocdi.text_installing),e.next().css({visibility:"visible"}),o.post(ajaxurl,{action:"iqconnetik_install_and_activate_plugins",wpnonce:iqconnetik_ocdi.wpnonce,"plugins_activate[]":c.plugins.activate,"plugins_install[]":c.plugins.install,demo:c.demo,slug:c.plugins.install[i]},function(i){o.post(i.url,i).done(function(){l.find("span.iqconnetik-ocdi-"+n).text(iqconnetik_ocdi.text_activating),c.plugins.activate.push(n),c.plugins.install.splice(c.plugins.install.indexOf(n),1),0===c.plugins.install.length&&o.post(ajaxurl,{action:"iqconnetik_install_and_activate_plugins",wpnonce:iqconnetik_ocdi.wpnonce,"plugins_activate[]":c.plugins.activate,"plugins_install[]":c.plugins.install,demo:c.demo,slug:c.plugins.activate},function(i){o.post(i.url,i).done(function(){l.find('span[class*="iqconnetik-ocdi-"]').text(iqconnetik_ocdi.text_done),e.next().css({visibility:"hidden"}),l.next().find(".button-primary").removeAttr("disabled")}).fail(function(i){console.error(i),e.closest(".iqconnetik-ocdi-button-wrap").find(".iqconnetik-error").remove(),e.before('<div class="iqconnetik-error">'+iqconnetik_ocdi.text_fail_tgm+"<br></div>")})}).fail(function(i){console.error(i),e.closest(".iqconnetik-ocdi-button-wrap").find(".iqconnetik-error").remove(),e.before('<div class="iqconnetik-error">'+iqconnetik_ocdi.text_fail+"<br></div>")})}).fail(function(i){console.error(i),e.closest(".iqconnetik-ocdi-button-wrap").find(".iqconnetik-error").remove(),e.before('<div class="iqconnetik-error">'+iqconnetik_ocdi.text_fail_tgm+"<br></div>")})}).fail(function(i){console.error(i),e.closest(".iqconnetik-ocdi-button-wrap").find(".iqconnetik-error").remove(),e.before('<div class="iqconnetik-error">'+iqconnetik_ocdi.text_fail+"<br></div>")})})}))}(jQuery);